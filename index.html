<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stargazer - Shuur Highlight</title>
    <style>
        body { margin: 0; overflow: hidden; background: #000; font-family: 'Georgia', serif; color: white; }
        #canvas-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; }
        
        #overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 5;
            text-align: center;
            width: 85%;
            pointer-events: none;
        }

        #lyrics {
            font-size: calc(1.4rem + 1vw);
            line-height: 2;
            text-shadow: 0 0 25px rgba(255,255,255,0.6);
            white-space: pre-line;
            display: none;
            letter-spacing: 1.5px;
        }

        /* Highlight Style */
        .highlight {
            color: #ff3333; /* Pure Red */
            text-shadow: 0 0 20px rgba(255, 0, 0, 0.8);
            font-weight: bold;
        }

        #instruction {
            font-size: 2rem;
            font-weight: bold;
            letter-spacing: 6px;
            animation: pulse 2s infinite ease-in-out;
            text-shadow: 0 0 20px rgba(255,255,255,0.6);
            cursor: pointer;
            pointer-events: auto;
        }

        #restart-btn {
            position: fixed;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid white;
            color: white;
            padding: 10px 25px;
            cursor: pointer;
            display: none;
            font-family: 'serif';
            letter-spacing: 2px;
            backdrop-filter: blur(5px);
            transition: 0.3s;
        }

        #restart-btn:hover { background: white; color: black; }

        @keyframes pulse {
            0%, 100% { opacity: 0.3; transform: scale(0.98); }
            50% { opacity: 1; transform: scale(1); }
        }
    </style>
</head>
<body>

    <div id="canvas-container"></div>

    <div id="overlay">
        <div id="instruction">TAP OR PRESS ENTER TO START</div>
        <div id="lyrics"></div>
    </div>

    <button id="restart-btn" onclick="location.reload()">REWATCH JOURNEY</button>

    <audio id="narration"><source src="Interstellar1.mp3" type="audio/mpeg"></audio>
    <audio id="bgm" loop><source src="interstellar.mp3" type="audio/mpeg"></audio>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // --- 3D STARFIELD ---
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({antialias: true});
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.getElementById('canvas-container').appendChild(renderer.domElement);

        const starGeometry = new THREE.BufferGeometry();
        const starVertices = [];
        for (let i = 0; i < 12000; i++) {
            starVertices.push((Math.random()-0.5)*2000, (Math.random()-0.5)*2000, (Math.random()-0.5)*2000);
        }
        starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starVertices, 3));
        const stars = new THREE.Points(starGeometry, new THREE.PointsMaterial({color: 0xffffff, size: 0.5}));
        scene.add(stars);
        camera.position.z = 5;

        function animate() {
            requestAnimationFrame(animate);
            stars.rotation.y += 0.0002;
            renderer.render(scene, camera);
        }
        animate();

        // --- CONTENT ---
        const text = `Woh kya batayenge raahein tumko,
Khud ki Jinko khabar nahi hai,
gazab ka dawa hai papiyon par
ajeeb jidd par adey hue hai
sikhate humko, wafa ki baatein 
khud ko shu'큰r (consciousness) pata nahi hai`;

        const typingSpeed = 90; 
        const lyricsEl = document.getElementById('lyrics');
        const instruction = document.getElementById('instruction');
        const bgm = document.getElementById('bgm');
        const narration = document.getElementById('narration');
        const restartBtn = document.getElementById('restart-btn');
        let index = 0;
        let started = false;

        function typeWriter() {
            if (index < text.length) {
                // Check if we are at the start of the word "shu'큰r"
                if (text.substring(index, index + 5) === "shu'큰r") {
                    const highlightSpan = document.createElement('span');
                    highlightSpan.className = 'highlight';
                    highlightSpan.textContent = "shu'큰r";
                    lyricsEl.appendChild(highlightSpan);
                    index += 5;
                } else {
                    let char = text.charAt(index);
                    lyricsEl.innerHTML += char;
                    index++;
                }

                let charAtLast = text.charAt(index - 1);
                let currentDelay = typingSpeed;
                if (charAtLast === ",") currentDelay = typingSpeed * 2.5;
                if (charAtLast === "\n") currentDelay = typingSpeed * 4;

                setTimeout(typeWriter, currentDelay);
            }
        }

        function start() {
            if (started) return;
            started = true;
            instruction.style.display = 'none';
            lyricsEl.style.display = 'block';
            bgm.volume = 0.25; 
            bgm.play();
            narration.volume = 1.0;
            narration.play();
            typeWriter();
            const warp = setInterval(() => {
                camera.position.z -= 0.1;
                if(camera.position.z < -250) clearInterval(warp);
            }, 10);
        }

        narration.onended = () => { restartBtn.style.display = 'block'; };
        window.addEventListener('keydown', (e) => { if(e.key === "Enter") start(); });
        window.onclick = start;
        window.ontouchstart = start;
    </script>
</body>
</html>